<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.7.1 by Michael Rose
  Copyright 2017 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE.txt
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin SEO -->









<title>Image Processing: Assignment 2 - Mark Kim</title>




<meta name="description" content="CS 6640Project 2Atlasing and Registration">




<meta name="author" content="Mark Kim">

<meta property="og:locale" content="en">
<meta property="og:site_name" content="Mark Kim">
<meta property="og:title" content="Image Processing: Assignment 2">


  <link rel="canonical" href="http://localhost:4000/classes/cs6640-assignment2/">
  <meta property="og:url" content="http://localhost:4000/classes/cs6640-assignment2/">



  <meta property="og:description" content="CS 6640Project 2Atlasing and Registration">

















  

  





  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2008-03-18T21:52:00-04:00">








  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "Mark Kim",
      "url" : "http://localhost:4000",
      "sameAs" : null
    }
  </script>







<!-- end SEO -->


<link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="Mark Kim Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/assets/css/main.css">

<!--[if lte IE 9]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


    <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->
  </head>

  <body class="layout--post">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    <div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <a class="site-title" href="http://localhost:4000/">Mark Kim</a>
        <ul class="visible-links">
          
        </ul>
        <button type="button">
          <span class="visually-hidden">Toggle Menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    



<div id="main" role="main">
  
  <div class="sidebar sticky">
  

<div itemscope itemtype="http://schema.org/Person">

  

  <div class="author__content">
    <h3 class="author__name" itemprop="name">Mark Kim</h3>
    
      <p class="author__bio" itemprop="description">
        Postdoctoral Researcher
      </p>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      <!--
        <li itemprop="homeLocation" itemscope itemtype="http://schema.org/Place">
          <i class="fa fa-fw fa-map-marker" aria-hidden="true"></i> <span itemprop="name">Somewhere</span>
        </li>
      -->
      <li>
        <a href="/publications" itemprop="sameAs">
          Publications
                </a>
      </li>
      <li>
        <a href="/assets/cv.pdf" itemprop="sameAs">
          CV
                </a>
      </li>

      
      <li>
        <a href="https://www.ornl.gov/division/csmd/scientific-data" itemprop="sameAs">
          Scientific Data Group
                </a>
      </li>
    
  
      
      <li>
        <a href="https://www.ornl.gov/division/CSM" itemprop="sameAs">
          Computer Science and Mathematics
        </a>
      </li>
    


  
  <li>
    <a href="https://www.ornl.gov" itemprop="sameAs">
      Oak Ridge National Laboratory
            </a>
  </li>
  

      

      

      

      

      

      

      

      

      

      

      
        <li>
          <a href="https://bitbucket.org/m-kim" itemprop="sameAs">
            <i class="fa fa-fw fa-bitbucket" aria-hidden="true"></i> Bitbucket
          </a>
        </li>
      

      
        <li>
          <a href="https://github.com/m-kim" itemprop="sameAs">
            <i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub
          </a>
        </li>
      

      
        <li>
          <a href="https://gitlab.com/m-kim" itemprop="sameAs">
            <i class="fa fa-fw fa-gitlab" aria-hidden="true"></i> GitLab
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      


      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs">
      <i class="fa fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Image Processing: Assignment 2">
    <meta itemprop="description" content="CS 6640Project 2Atlasing and Registration">
    <meta itemprop="datePublished" content="March 18, 2008">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 class="page__title" itemprop="headline">Image Processing: Assignment 2
</h1>
          
            <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 




  4 minute read
</p>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>CS 6640
<br />
Project 2
<br />
Atlasing and Registration</p>

<p>###Table of Content###</p>

<p><a name="TOC" title="TOC"></a></p>

<ol>
  <li><a href="#shape">Shapes</a></li>
  <li><a href="#brain">Brain Images</a></li>
  <li>Presidential Portraits
    <ul>
      <li><a href="#atlas">Atlas et al</a></li>
      <li><a href="#portraits">Portraits Used</a></li>
      <li><a href="#correspondences">Correspondence example</a></li>
    </ul>
  </li>
  <li><a href="#discussion">Discussion</a>
    <ul>
      <li><a href="#contrast">Contrast Matching</a></li>
      <li><a href="#output">Image Size</a></li>
      <li><a href="#answers">Answers</a></li>
    </ul>
  </li>
</ol>

<p>###Part1: Shapes###
<a name="shape" title="shape"></a></p>

<table>
  <tbody>
    <tr>
      <td>Atlas</td>
      <td>Intensity</td>
      <td>Shape variance</td>
    </tr>
    <tr>
      <td><img src="/assets/cs6640/atlas_out.png" alt="atlas_out" /></td>
      <td><img src="/assets/cs6640/intensity_var_out.png" alt="intensity_var_out" /></td>
      <td><img src="/assets/cs6640/shape_var_out.png" alt="shape_var_out" /></td>
    </tr>
  </tbody>
</table>

<p>###Part 2: Brain scans###
<a name="brain" title="brain"></a></p>

<table>
  <tbody>
    <tr>
      <td>Atlas</td>
      <td>Intensity</td>
      <td>Shape variance</td>
    </tr>
    <tr>
      <td><img src="/assets/cs6640/brain_atlas_out.png" alt="brain_atlas_out" /></td>
      <td><img src="/assets/cs6640/brain_intensity_var_out.png" alt="brain_intensity_var_out" /></td>
      <td><img src="/assets/cs6640/brain_shape_var_out.png" alt="brain_shape_var_out" /></td>
    </tr>
  </tbody>
</table>

<p>###U.S. Presidents###
<a name="pres_atlas" title="pres_atlas"></a></p>

<table>
  <tbody>
    <tr>
      <td>Atlas</td>
      <td>Intensity</td>
      <td>Shape variance</td>
    </tr>
    <tr>
      <td><img src="/assets/cs6640/presidents_atlas_out.png" alt="presidents_atlas_out" /></td>
      <td><img src="/assets/cs6640/presidents_intensity_var_out.png" alt="presidents_intensity_var_out" /></td>
      <td><img src="/assets/cs6640/presidents_shape_var_out.png" alt="presidents_shape_var_out" /></td>
    </tr>
  </tbody>
</table>

<p>###Presidential Portraits###
<a name="portraits" title="portraits"></a></p>

<table>
  <tbody>
    <tr>
      <td>Chester Arthur</td>
      <td>Thomas Jefferson</td>
    </tr>
    <tr>
      <td><img src="/assets/cs6640/port-c-arthur.jpg" alt="port-c-arthur" /></td>
      <td><img src="/assets/cs6640/port-jefferson.jpg" alt="port-jefferson" /></td>
    </tr>
    <tr>
      <td>John Q. Adams</td>
      <td>Abraham Lincoln</td>
    </tr>
    <tr>
      <td><a href="/assets/cs6640/port-jqadams.jpg">port-jqadams</a></td>
      <td><a href="/assets/cs6640/port-linc.jpg">port-linc</a></td>
    </tr>
    <tr>
      <td>Rutherford Hayes</td>
      <td>Zachary Taylor</td>
    </tr>
    <tr>
      <td><a href="/assets/cs6640/port-rb-hayes.jpg">port-rb-hayes</a></td>
      <td><a href="/assets/cs6640/port-zach-taylor.jpg">port-zach-taylor</a></td>
    </tr>
  </tbody>
</table>

<p>###Correspondence Points for Presidential Portraits###
<a name="correspondences" title="correspondences"></a></p>

<p><a href="/assets/cs6640/port-jefferson-marked.jpg">port-jefferson-marked</a></p>

<p>###Discussion###
<a name="discussion" title="discussion"></a></p>

<p>####Design Choice####
<a name="discussion" title="discussion"></a></p>

<p>####Contrast Matching####
<a name="contrast" title="contrast"></a>
The best way would be to average all the CDFs (but aren’t we already doing that with the atlas?).  Instead, I chose to use histogram equalization, which seems to give reasonable output.  However it would have been better to do histogram matching, but there is only so much time in a single day.  =D  Also, I spent time playing with the number of bins for histogram equalization, but the setting I chose worked well for the shapes.  It didn’t occur to me to play around with it as well for brains or the portraits.  More dials to twiddle with I suppose.</p>

<p>####Output Size####
<a name="output" title="output"></a>
If you look at the atlas.m code, you’ll see that I initially run through each figure and pre-warp each corner and figure out the maximum in x and y and the minimum in x and y.  This occurs <em>after</em> I figure out the "average" image.  I figure this would give a "good enough" bounding box.  Its very easy to think of cases where parts of the image could still end up outside the bounding box and it would be trivial to adjust for this as well:  just run it along all the edges.  But, for this assignment (and the given inputs) its unnecessary.</p>

<p>However, looking at my images again, it seems that something is not quite right.  There is a lot of black border in all my images.  But, this also might be because of scaling factors, but I doubt it because averaging the images should take care of that.  Nevertheless, the image size created handily supports all the images that I throw at it, so I’m not <strong>too</strong> concerned.</p>

<p>###Answers to Question###
<a name="answers" title="answers"></a></p>

<p>####How is the quality of the atlas (shape, variability) affected by the number of control points?####</p>

<p>You have to have enough control points.  Without enough control points the transformation doesn’t look right, i.e. things don’t line up properly.  For instance, I picked portraits because there are easily identifiable structures on a face:  eyes, nose, and mouth (and to a lesser extent ears, forehead, wrinkles etc).  I chose to concentrate on the eyes, nose and mouth though.  If you look at the <a href="index.html#correspondences">example</a> correspondences image, you’ll see that I placed multiple correspondence points on the eyes as well as the mouth.  These objects on the face are crucial in getting a proper warp.</p>

<p>####What Kinds Points Are Easily Found Among The Different Brain Images?####</p>

<p>I had to look up some more information about the brain.  I found an image <a href="http://www.medfriendly.com/periventricularwhitematter.html">here</a> to be useful in figuring out correspondence points.</p>

<ol>
  <li>central fissure</li>
  <li>corpus callosum</li>
  <li>lateral fissure</li>
  <li>lateral ventricles</li>
  <li>occipital lobe</li>
  <li>third ventricle</li>
</ol>

<p>I’m not gonna lie, I have no idea whether or not I labelled any of the correspondence points properly.  I think I got pretty close, but some features seem to disapear in some images.</p>

<p>####What is the effect of removing rotation, translation, and scaling from the shape variation?####</p>

<p>####Shape Variance with rotation/scaling/translation removed####</p>

<table>
  <tbody>
    <tr>
      <td>Shape Variance (rigid)</td>
      <td>Brain Variance (rigid)</td>
    </tr>
    <tr>
      <td><img src="/assets/cs6640/shape_var_out-rigid.png" alt="shape_var_out-rigid" /></td>
      <td><img src="/assets/cs6640/brain_shape_var_out-rigid.png" alt="brain_shape_var_out-rigid" /></td>
    </tr>
  </tbody>
</table>

<p>I found this part of the assignment to be the most confusing aspect.  But, it all <em>clicked</em> together right before I needed to turn the project in.  I solved for the rotation/scaling using SVD and the affine transformation matrix.</p>

<p>[U S V] = svd(A);</p>

<p>And U’V is the rotation and the trace of S is the scaling.  Very cool stuff indeed.</p>

<p>Once I had this information, I created new correspondences and a new "average" image and proceed to go through the TPS warp again.</p>

<p>####But what does it all mean?####</p>

<p>Looking at the non-rigid vs the rigid, I don’t really see <em>that</em> much of a difference.  And when you think about it, for the shape and the brain images, that makes sense because the images are all the same size (respectively) and the "shape" of the image aren’t that different (especially the brain).  So, these control samples wouldn’t have significantly different shape variance between images with the transformations removed and those that do not have the transformations removed because in the end, the shapes are similar for both the brain images and the shape images.  I would expect images that have significant variation in the shape, like significantly different perspective of the same objects, to have the removal of the transformations show up in the shape variation more significantly.</p>

<p>####From your experiments how does the accuracy of the control points affect the results?####</p>

<table>
  <tbody>
    <tr>
      <td>Atlas</td>
      <td>Intensity</td>
      <td>Shape Variance</td>
    </tr>
    <tr>
      <td><img src="/assets/cs6640/bad_brain_atlas_out-marked.png" alt="bad_brain_atlas_out-marked" /></td>
      <td><img src="/assets/cs6640/bad_brain_intensity_var_out-marked.png" alt="bad_brain_intensity_var_out-marked" /></td>
      <td><img src="/assets/cs6640/bad_brain_shape_var_out.png" alt="bad_brain_shape_var_out" /></td>
    </tr>
  </tbody>
</table>

<p>####Comments####
This was an early attempt on my part to come up with correct correspondence points for the brain scans.  And, as you can see, I didn’t do so well.  Anything in red was added after the images were generated to highlight what I’m discussing here.  As you can see, poor placement of correspondence points in the final image (IBSR_16_ana_normalized_cropped_slice_42.tiff) lead to the massive brain tumor on the right side.  This brought up the whole discussion earlier about whether I had actually labelled anything properly.  But, as you can see mislabeling even a single image can lead to some awful results.</p>

        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fa fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="http://localhost:4000/tags/#cs6640" class="page__taxonomy-item" rel="tag">cs6640</a>
    
    </span>
  </p>




  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fa fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="http://localhost:4000/categories/#classes" class="page__taxonomy-item" rel="tag">classes</a>
    
    </span>
  </p>


        
          <p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Updated:</strong> <time datetime="2008-03-18T21:52:00-04:00">March 18, 2008</time></p>
        
      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?text=Image+Processing%3A+Assignment+2%20http%3A%2F%2Flocalhost%3A4000%2Fclasses%2Fcs6640-assignment2%2F" class="btn btn--twitter" title="Share on Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A4000%2Fclasses%2Fcs6640-assignment2%2F" class="btn btn--facebook" title="Share on Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://plus.google.com/share?url=http%3A%2F%2Flocalhost%3A4000%2Fclasses%2Fcs6640-assignment2%2F" class="btn btn--google-plus" title="Share on Google Plus"><i class="fa fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Flocalhost%3A4000%2Fclasses%2Fcs6640-assignment2%2F" class="btn btn--linkedin" title="Share on LinkedIn"><i class="fa fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="http://localhost:4000/classes/cs6620-assignment3/" class="pagination--pager" title="CS 6620 Ray Tracing: Assignment 3
">Previous</a>
    
    
      <a href="http://localhost:4000/classes/cs6620-assignment4/" class="pagination--pager" title="CS 6620 Ray Tracing: Assignment 4
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You May Also Enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="http://localhost:4000/research/grad-school-travel-assistance/" rel="permalink">Graduate School Travel Assistance
</a>
      
    </h2>
    
      <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 




  less than 1 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">Presenting our work, “Surface Flow Visualization Using the Closest Point Embedding” at a premier conference such as the IEEE Pacific Visualization Conference...</p>
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="http://localhost:4000/psaap-poster/" rel="permalink">PSAAP Poster redux
</a>
      
    </h2>
    
      <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 




  less than 1 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">PSAAP Poster
</p>
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="http://localhost:4000/research/psaap-poster/" rel="permalink">PSAAP Poster
</a>
      
    </h2>
    
      <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 




  less than 1 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">PSAAP Poster
</p>
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="http://localhost:4000/research/octree-voxelization/" rel="permalink">Octree and voxelization
</a>
      
    </h2>
    
      <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 




  3 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">First, I need to know how deep the octree needs to be. So, I threw the mesh into 
a GPU octree and it never returned. Okay, so I threw it in a CPU octree, an...</p>
  </article>
</div>
        
      </div>
    </div>
  
</div>


    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
    
    
      <li><a href="https://github.com/m-kim"><i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
      <li><a href="https://gitlab.com/m-kim"><i class="fa fa-fw fa-gitlab" aria-hidden="true"></i> Gitlab</a></li>
    
    
      <li><a href="https://bitbucket.org/m-kim"><i class="fa fa-fw fa-bitbucket" aria-hidden="true"></i> Bitbucket</a></li>
    
    <li><a href="http://localhost:4000/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2017 Mark Kim. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="http://localhost:4000/assets/js/main.min.js"></script>








  </body>
</html>